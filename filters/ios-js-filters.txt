[AdBlock Plus 2.0]
! Title: JHS iOS Filters (JS)
! Version: 2024-08-31.3
! Expires: 1 days
! License: CC0-1.0
! Homepage: https://github.com/jocoro19/filter-lists

! Mobile YouTube
! Hide videos with less than 1000 views and streams with less than 50 watching
m.youtube.com##+js(rpnt, script, /(if \(document\.fonts &&)/, `var y = new MutationObserver(() => document.querySelectorAll(".watch-below-the-player ytm-video-with-context-renderer, [tab-identifier='FEwhat_to_watch'] ytm-rich-item-renderer").forEach(a => a.querySelectorAll("ytm-badge-and-byline-renderer > span").forEach(b => /^((?:No|[0-9]{0,3}) views?|(?:[1-4]?[0-9]) watching)$/.test(b.textContent) && (a.hidden = true)))); y.observe(document.body, { subtree: true, childList: true }); $1`)

! Disable muted autoplay on Mobile YouTube homepage, unmute videos by default, and hide "Open App" message
m.youtube.com##+js(rpnt, script, /(var ytcsi=)/, `document.head.insertAdjacentHTML("afterbegin", "<style>.ytp-unmute, .ytm-bottom-sheet-overlay-container:has([style*='/open-app.svg']), #global-loader:has(~ .ytm-bottom-sheet-overlay-container [style*='/open-app.svg']) { display: none !important; }</style>"); var w = new MutationObserver(() => { var a = document.querySelector("ytm-pages-dwell-detection"); a?.remove(); var b = document.querySelector(".ytp-unmute:not([style])"); b?.click(); b?.remove(); var c = document.querySelector("[style*='/open-app.svg'] button"); c?.click() }); w.observe(document.body, { subtree: true, childList: true }); $1`)

! Show chat on live streams
m.youtube.com##+js(rpnt, script, /(var ytcfg=)/, `var z = new MutationObserver(() => { var a = document.querySelector(".slim-video-action-bar-actions > button-view-model:first-of-type"); if (document.querySelector(".time-display-with-live-dot, .YtwPlayerTimeDisplayContentLiveDot") && !document.getElementById("openChat") && a) { var b = a.cloneNode(true); b.id = "openChat"; b.querySelector("div:has(> c3-icon) + div").textContent = "Open chat"; b.querySelector("div:has(> c3-icon) path").setAttribute("d", "M21 21H3V3h9v1H4v16h16v-8h1zM15 3v1h4.32l-8.03 8.03.71.71 8-8V9h1V3z"); b.onclick = () => window.open("https://www.youtube.com/live_chat?v=" + new URL(location.href).searchParams.get("v")); a.before(b)}; var c = document.querySelector(".YtwPlayerTimeDisplayContentLiveDot:not(.YtwPlayerTimeDisplayContentLiveDotHead)"); if (c) { c.addEventListener("click", () => { var d = document.querySelector("video"); d.currentTime = d.duration - 2 }, {once: true}) } }); z.observe(document.body, { subtree: true, childList: true }); $1`)
www.youtube.com##+js(rpnt, script, /(var ytcfg=)/, `location.pathname.startsWith("/@") && (location.hostname = "m.youtube.com"); location.pathname === "/live_chat" && document.head.insertAdjacentHTML("afterbegin", "<style>body { width: 50vw !important; height: 50vw !important; background-color: var(--yt-spec-base-background) !important; transform: scale(2); transform-origin: 0 0; overflow: clip !important;} yt-live-chat-app { width: 50vw !important; height: 50vh !important; } #items.yt-live-chat-item-list-renderer { pointer-events: none !important; } tp-yt-iron-dropdown { left: 25vw !important; top: 25vh !important; transform: translate(-50%, -50%) !important; } yt-live-chat-app:has(tp-yt-iron-dropdown:not([style*='display: none'])) > #contents { filter: brightness(0.5); } yt-live-chat-renderer iron-pages:has(> #input-panel) { border-bottom: none !important; }</style>"); $1`)

! Return YouTube Dislike (data from returnyoutubedislike.com)
m.youtube.com##+js(rpnt, script, /(var setMessage=)/, `(()=>{const t=document.querySelector.bind(document),e=document.getElementById.bind(document);let n,o,i,a,s=0,r=0,c="/watch"===location.pathname,l=location.pathname.startsWith("/shorts/");function d(n){if(e("dislikeCount"))e("dislikeCount").textContent=u(n);else{const e=document.createElement("span"),o=t(c?"dislike-button-view-model button":l&&"[data-is-active] ytm-toggle-button-renderer:nth-of-type(2) button");if(e.id="dislikeCount",e.textContent=u(n),c&&o){const t=o.querySelector(".yt-spec-button-shape-next__icon");o.style.width="auto",t.style.marginLeft="-5px",e.style.marginLeft="6px",t.after(e),r=1}if(l){t("[data-is-active] ytm-toggle-button-renderer:nth-of-type(2) div > span").innerHTML=e.outerHTML,r=1}}}function u(t){let e;return t<1e3?t:(t<1e4?e=Math.floor(t/100)/10+"K":t<1e6?e=Math.floor(t/1e3)+"K":t<1e7?e=Math.floor(t/1e5)/10+"M":t>=1e7&&(e=Math.floor(t/1e6)+"M"),e&&e.replace(".0",""))}new MutationObserver((()=>{c="/watch"===location.pathname,l=location.pathname.startsWith("/shorts/"),c||(o=""),l||(i=""),c||l||h();const u=t("[data-is-active]");function h(){s&&a.abort(),s=0,r=0}c||l&&u===i?r&&!e("dislikeCount")&&d(n):l&&i&&u&&(i=t("[data-is-active]"),h()),c&&location.search&&o!==location.search&&(o=location.search,h()),t(c?"dislike-button-view-model":l&&"[data-is-active] ytm-toggle-button-renderer:nth-of-type(2) button")&&function(){if(!s){a=new AbortController,s=1;const e=new URL(location.href),o=c&&e.searchParams.get("v")||l&&e.pathname.slice(8);fetch("https://returnyoutubedislikeapi.com/votes?videoId="+o,{cache:"no-cache",method:"GET",signal:a.signal}).then((t=>t.json())).then((e=>{"dislikes"in e&&(n=e.dislikes,d(n),function(){const e=t(c?"dislike-button-view-model button":l&&"[data-is-active] ytm-toggle-button-renderer:nth-of-type(2) button");"dislikeButton"!==e.id&&(e.id="dislikeButton",e.addEventListener("click",(()=>{"true"===e.ariaPressed&&(++n,d(n)),"false"===e.ariaPressed&&(--n,d(n))})))}(),l&&!i&&(i=t("[data-is-active]")))}))}}()})).observe(document.body,{childList:!0,subtree:!0})})(); $1`)

! Other
danbooru.donmai.us##+js(rpnt, script, /(\$\(function\(\))/, `if (/^\/posts\/\d*$/.test(location.pathname)) { var x = new URL(location.href); x.searchParams.delete("q"); history.replaceState(null, "", x.href) }; $1`)
gelbooru.com##+js(rpnt, script, /(function responsiveViewToggle\(\))/, `document.head.insertAdjacentHTML("afterbegin", "<style>div:has(> [id^='ts_ad_']), .mobileActions .showEditBox { display: none !important; }</style>"); var x = document.querySelectorAll(".thumbnail-container"); location.search.includes("s=list") && x.length == 2 && (x[0].innerHTML += x[1].innerHTML, x[1].remove()); document.querySelectorAll(".thumbnail-preview a").forEach(a => { var b = new URL(a.href); b.searchParams.delete("tags"); a.href = b.href }); $1`)
medibang.com##+js(rpnt, script, /(var ROOT_URL =)/, `var x = new MutationObserver(() => document.querySelectorAll(".illust-item_box a").forEach(a => a.href = a.href.replace(".com/picture/viewer/", ".com/picture/"))); location.pathname === "/contentsSearch/" && x.observe(document.body, { subtree: true, childList: true }); /^\/picture\//.test(location.pathname) && document.querySelectorAll(".pictureDetails__image > a").forEach(b => { delete b.dataset.zoomUrl; b.href = b.querySelector("img").src.replace("/1280_960/", "/") }); $1`)
toyhou.se##+js(rpnt, script, /(var modalCount)/, `var warning = document.querySelector(".content-warning"); warning && (warning.style.display = "none") && document.querySelector(".content-warning .btn-success").click(); $1`)

picuki.com##+js(rpnt, script, /var isAdBlockActive=/, `(()=>{document.body.insertAdjacentHTML("beforeend", "<style>.photo-action-buttons { position: static !important; } .photo-action-description { display: -webkit-box !important; -webkit-line-clamp: 3 !important; -webkit-box-orient: vertical !important; white-space: normal !important; height: 63px !important; max-height: unset !important; } .photo img { border-radius: 8px 8px 0 0 !important; } a.tag { text-decoration: underline; }</style>");if(/^\/(profile|tag)\//.test(location.pathname)){function e(){document.querySelectorAll("div.photo-description:not(:has(.tag)), .photo-action-description").forEach((e=>{e.innerHTML.includes("#")&&(e.innerHTML=e.innerHTML.replaceAll(/#(\S+)/g,"<a class='tag' href='/tag/$1'>#$1</a>"))}))}e();new MutationObserver(e).observe(document.querySelector(".box-photos"),{childList:!0})}if(location.pathname.startsWith("/media/")){const t=document.querySelector("div.single-photo-description");if(t.innerHTML=t.innerHTML.replaceAll(/@(\S+)/g,"<a href='/profile/$1'>@$1</a>"),document.querySelector(".tagged")){document.querySelectorAll(".tagged > div > div").forEach((e=>{e.innerHTML=e.innerHTML.replace(/@(.*)/,"<a href='/profile/$1'>@$1</a>")}))}}})(); $&`)
piokok.com##+js(rpnt, script, /var api=/, `(()=>{function t(){document.querySelectorAll(".cover_link").forEach(a=>a.removeAttribute("target"));document.querySelectorAll(".meta a[href^='/tag/']").forEach((t=>{const e=t.nextSibling;if(e?.textContent.startsWith(" _")){const n=e.textContent.match(/^ (_\S*)/)[1];e.textContent=e.textContent.replace(n,""),t.href=t.href.replace(/\/$/,n+"/"),t.textContent+=n}}))}if(t(),location.pathname.startsWith("/profile/")){new MutationObserver(t).observe(document.querySelector(".items"),{childList:!0})}})(); $&`)
