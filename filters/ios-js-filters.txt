[AdBlock Plus 2.0]
! Title: JHS iOS Filters (JS)
! Version: 2025-09-12.1
! Expires: 1 days
! License: CC0-1.0
! Homepage: https://github.com/jocoro19/filter-lists

! Mobile YouTube
! Hide videos with less than 1000 views and streams with less than 50 watching
m.youtube.com##+js(rpnt, script, /(var ytcsi=)/, `var y = new MutationObserver(() => document.querySelectorAll(".watch-below-the-player ytm-video-with-context-renderer, [tab-identifier='FEwhat_to_watch'] ytm-rich-item-renderer").forEach(a => a.querySelectorAll("ytm-badge-and-byline-renderer > span").forEach(b => /^((?:No|[0-9]{0,3}) views?|(?:[1-4]?[0-9]) watching)$/.test(b.textContent) && (a.hidden = true)))); y.observe(document.body, { subtree: true, childList: true }); $1`)

! Disable muted autoplay on Mobile YouTube homepage, unmute videos by default, and hide "Open App" message
m.youtube.com##+js(rpnt, script, /(var ytcsi=)/, `document.head.insertAdjacentHTML("afterbegin", "<style>.ytp-unmute, .ytm-bottom-sheet-overlay-container:has([style*='/open-app.svg']), #global-loader:has(~ .ytm-bottom-sheet-overlay-container [style*='/open-app.svg']) { display: none !important; }</style>"); var w = new MutationObserver(() => { var a = document.querySelector("ytm-pages-dwell-detection"); a?.remove(); var b = document.querySelector(".ytp-unmute:not([style])"); b?.click(); b?.remove(); var c = document.querySelector("[style*='/open-app.svg'] button"); c?.click() }); w.observe(document.body, { subtree: true, childList: true }); $1`)

! Fix comments scrolling (temporary)
m.youtube.com##+js(rpnt, script, /(var ytcsi=)/, `(()=>{const e=document.createElement("style");e.innerHTML=".engagement-panel-container {position: absolute; width: 100%; height: 100%;} .engagement-panel-content-wrapper {overscroll-behavior: contain;} body[engagement-panel-open] .watch-below-the-player {visibility: hidden;} .factoid-value {font-family: inherit; font-weight: 500;}".replaceAll(";"," !important;"),document.head.appendChild(e);const t=new MutationObserver(()=>{document.querySelectorAll("ytm-engagement-panel").forEach(e=>{const t=e?.querySelector(".engagement-panel-section-list-header-wrapper:not(.fixed");if(t){let n,o,a=!1;t.addEventListener("touchstart",e=>{e.stopImmediatePropagation(),o=0,n=e.pageY},!0),t.addEventListener("touchmove",e=>{e.stopImmediatePropagation(),e.preventDefault(),o=n-e.pageY},!0),t.addEventListener("touchend",n=>{n.stopImmediatePropagation(),!a&&o<-100||a&&n.pageY>window.innerHeight/2+100?t.querySelector("button")?.click():!a&&o>100?(a=!0,document.querySelector("video")?.pause(),e.style.top=0):a&&o<-100?(a=!1,e.removeAttribute("style")):o=0},!0),t.classList.add("fixed")}}),document.querySelectorAll("ytm-engagement-panel .factoid:not(.fixed)").forEach(e=>{e.classList.add("fixed"),e.firstElementChild.innerHTML=e.ariaLabel,e.lastElementChild?.remove()})});t.observe(document.body,{subtree:!0,childList:!0}),globalThis.disableCommentsFix=()=>{t.disconnect(),e.remove()};})(); $1`)

! Show chat on live streams
m.youtube.com##+js(rpnt, script, /(var ytcfg=)/, `var z = new MutationObserver(() => { var a = document.querySelector(".slim-video-action-bar-actions > button-view-model:first-of-type"); if (document.querySelector(".ytwPlayerTimeDisplayLiveDot") && !document.getElementById("openChat") && a) { var b = a.cloneNode(true); b.id = "openChat"; b.querySelector("div:has(> c3-icon) + div").textContent = "Open chat"; b.querySelector("div:has(> c3-icon) path").setAttribute("d", "M21 21H3V3h9v1H4v16h16v-8h1zM15 3v1h4.32l-8.03 8.03.71.71 8-8V9h1V3z"); b.onclick = () => window.open("https://www.youtube.com/live_chat?v=" + new URL(location.href).searchParams.get("v")); a.before(b)}; var c = document.querySelector(".ytwPlayerTimeDisplayContentLiveDot:not(.ytwPlayerTimeDisplayContentLiveDotHead)"); if (c) { c.addEventListener("click", () => { var d = document.querySelector("video"); d.currentTime = d.duration - 2 }, {once: true}) } }); z.observe(document.body, { subtree: true, childList: true }); $1`)
www.youtube.com##+js(rpnt, script, /(var ytcfg=)/, `location.pathname.startsWith("/@") && (location.hostname = "m.youtube.com"); location.pathname === "/live_chat" && document.head.insertAdjacentHTML("afterbegin", "<style>body { width: 50vw !important; height: 50vw !important; background-color: var(--yt-spec-base-background) !important; transform: scale(2); transform-origin: 0 0; overflow: clip !important;} yt-live-chat-app { width: 50vw !important; height: 50vh !important; } #items.yt-live-chat-item-list-renderer { pointer-events: none !important; } tp-yt-iron-dropdown { left: 25vw !important; top: 25vh !important; transform: translate(-50%, -50%) !important; } yt-live-chat-app:has(tp-yt-iron-dropdown:not([style*='display: none'])) > #contents { filter: brightness(0.5); } yt-live-chat-renderer iron-pages:has(> #input-panel) { border-bottom: none !important; }</style>"); $1`)

! Return YouTube Dislike (data from returnyoutubedislike.com)
m.youtube.com##+js(rpnt, script, /(var setMessage=)/, `(()=>{let e,t,o,n,i,l=0,s=0,a="/watch"===location.pathname,c=location.pathname.startsWith("/shorts/");function r(e){if(document.getElementById("dislikeCount"))document.getElementById("dislikeCount").textContent=d(e);else{const t=i.cloneNode();if(t.textContent=d(e),a){const e=document.querySelector("dislike-button-view-model button");e.style.width="auto";const o=e.querySelector(".yt-spec-button-shape-next__icon");o.style.marginLeft="-5px",o.after(t)}if(c){const e=document.querySelector("ytm-toggle-button-renderer:last-child div > span");e&&(e.innerHTML=t.outerHTML)}}}function d(e){let t;return e<1e3?e:(e<1e4?t=Math.floor(e/100)/10+"K":e<1e6?t=Math.floor(e/1e3)+"K":e<1e7?t=Math.floor(e/1e5)/10+"M":e>=1e7&&(t=Math.floor(e/1e6)+"M"),t&&t.replace(".0",""))}new MutationObserver((()=>{function d(){l&&n.abort(),l=0,e=0,s=0}a="/watch"===location.pathname,c=location.pathname.startsWith("/shorts/"),a||(t=""),c||(o=""),a||c||d(),s&&!document.getElementById("dislikeCount")&&r(e),a&&location.search&&t!==location.search&&(t=location.search,d()),c&&location.pathname.startsWith("/shorts/")&&o!==location.pathname.slice(8)&&(o=location.pathname.slice(8),d()),document.querySelector(a?"dislike-button-view-model":c&&"ytm-toggle-button-renderer:last-child")&&function(){if(!l){n=new AbortController,l=1,console.log("Getting dislike count...");const d=new URL(location.href),u=a&&d.searchParams.get("v")||c&&d.pathname.slice(8);fetch("https://returnyoutubedislikeapi.com/votes?videoId="+u,{cache:"no-cache",method:"GET",signal:n.signal}).then((e=>e.json())).then((n=>{"dislikes"in n&&(console.log("Dislikes:",n.dislikes),e=n.dislikes,i=document.createElement("span"),i.id="dislikeCount",a&&(t||(t=location.search),i.style.marginLeft="6px"),c&&!o&&(o=location.pathname.slice(8)),s=1,r(e),function(){const t=document.querySelector(a?"dislike-button-view-model button":c&&"ytm-toggle-button-renderer:last-child button");"dislikeButton"!==t.id&&(t.id="dislikeButton",t.addEventListener("click",(()=>{"true"===t.ariaPressed&&(++e,r(e)),"false"===t.ariaPressed&&(--e,r(e))})))}())}))}}()})).observe(document.documentElement,{childList:!0,subtree:!0});})(); $1`)

! SponsorBlock (data from sponsor.ajay.app)
m.youtube.com##+js(rpnt, script, /(var setMessage=)/, `(()=>{let e,t,o,n,s,r=[],a=0,i=!0;new MutationObserver((()=>{"/watch"===location.pathname&&document.querySelector("video")?.duration&&function(){if(!a){n=new AbortController,a=1,e=document.querySelector("video"),o=location.search,console.log("Getting sponsor data...");const l=new URL(location.href).searchParams.get("v");fetch('https://sponsor.ajay.app/api/skipSegments?categories=["sponsor","poi_highlight"]&videoID='+l,{cache:"no-cache",method:"GET",signal:n.signal}).then((e=>e.ok&&e.json())).then((o=>{if(o){const n=o.filter((e=>"sponsor"===e.category&&e.segment[1]-e.segment[0]>=10||"poi_highlight"===e.category));n.length>0&&(n.forEach((e=>{r.push({type:e.category,start:e.segment[0],end:e.segment[1]})})),console.log("Sponsor segments:",...r),localStorage.getItem("skipDisabled")&&(i=!1),function(){const o=e.duration,n=document.createElement("div");n.id="segmentContainer",n.style.cssText="width: 100%; height: 3px; position: absolute;",r.forEach(((e,t)=>{const s=document.createElement("div");s.style.cssText="min-width: 1px; height: inherit; opacity: 0.7; position: absolute;",s.style.left=e.start/o*100+"%",e.start!==e.end?s.style.right=100*(1-e.end/o)+"%":s.style.width="4px","sponsor"===e.type&&(s.style.backgroundColor="#00d400"),"poi_highlight"===e.type&&(s.style.backgroundColor="#00b3ff"),e.marker=s,n.appendChild(s)})),t=n}(),e.addEventListener("timeupdate",(()=>{const t=r.filter((t=>"sponsor"===t.type&&e.currentTime>=t.start&&e.currentTime<t.end))[0];if(t){if(i)e.currentTime=t.end;else if(!document.getElementById("sponsor-info")){const o=document.createElement("div"),n=Math.floor(t.end/3600),s=Math.floor(t.end%3600/60),r=Math.floor(t.end%60);o.id="sponsor-info",o.textContent="Sponsor (until "+(n?n+":"+(s+":").padStart(3,"0"):s+":")+String(r).padStart(2,"0")+")",document.querySelector(".ytwPlayerTimeDisplayOverlayWrapper")?(o.className="ytwPlayerTimeDisplayOverlayWrapper",o.style.cssText="pointer-events: auto; white-space: nowrap; margin-left: 8px;"):(o.className="ytwPlayerTimeDisplayTime ytwPlayerTimeDisplayTimeMacro",o.style.cssText="pointer-events: auto;",o.insertAdjacentHTML("afterbegin",'<span style="margin: 0 4px">Â·</span>')),document.querySelector(".ytwPlayerTimeDisplayContent").appendChild(o),o.addEventListener("click",(()=>e.currentTime=t.end)),(chapter=document.querySelector(".ytwPlayerTimeDisplayPlaybarActionContainer"))&&(chapter.style.order="1")}}else document.getElementById("sponsor-info")&&document.getElementById("sponsor-info").remove()})),s=document.createElement("div"),s.innerHTML='<button class="icon-button" id="skip-button"><svg viewBox="0 0 565.15 568" style="fill: currentColor; height: 24px;"><path d="M282.58 568a65 65 0 0 1-34.14-9.66C95.41 463.94 2.54 300.46 0 121a64.91 64.91 0 0 1 34-58.09 522.56 522.56 0 0 1 497.16 0 64.91 64.91 0 0 1 34 58.12c-2.53 179.43-95.4 342.91-248.42 437.3a65 65 0 0 1-34.16 9.67m0-548.31A502.24 502.24 0 0 0 43.4 80.22a45.27 45.27 0 0 0-23.7 40.53c2.44 172.67 91.81 330 239.07 420.83a46.19 46.19 0 0 0 47.61 0C453.64 450.73 543 293.42 545.45 120.75a45.26 45.26 0 0 0-23.7-40.54 502.26 502.26 0 0 0-239.17-60.52"/><path d="M284.705 42.693A479.9 479.9 0 0 0 54.37 100.42a22.53 22.53 0 0 0-11.7 20c2.4 169.84 93.001 318.22 228.161 401.59a22.48 22.48 0 0 0 23.49 0c135.16-83.37 225.76-231.75 228.16-401.59a22.53 22.53 0 0 0-11.7-20 479.9 479.9 0 0 0-226.075-57.727M220.41 145.74l190.87 110.2-190.87 110.2z"/></svg></button>',s.style.order="-1")}else console.log("No sponsor data was found")}))}}(),t&&!document.getElementById("segmentContainer")&&function(){const e=t.cloneNode(!0),o=document.querySelector(".ytProgressBarLineProgressBarLine, .ytChapteredProgressBarHost");o?.appendChild(e),r.some((e=>"sponsor"===e.type))&&document.querySelector("player-top-controls > div")&&!document.getElementById("skip-button")&&function(){const e=s.cloneNode(!0),t=e.querySelector("path[d^='M284']");i||(t.style.display="none");e.addEventListener("click",(()=>{i?(i=!1,localStorage.setItem("skipDisabled","true"),t.style.display="none"):i||(i=!0,localStorage.removeItem("skipDisabled"),t.style.cssText="")})),document.querySelector("player-top-controls > div").appendChild(e)}()}(),a&&location.search!==o&&(o=location.search,t=void 0,e=void 0,r=[],n.abort(),a=0)})).observe(document.documentElement,{childList:!0,subtree:!0});})(); $1`)

! Other
danbooru.donmai.us##+js(rpnt, script, /(\$\(function\(\))/, `if (/^\/posts\/\d*$/.test(location.pathname)) { var x = new URL(location.href); x.searchParams.delete("q"); history.replaceState(null, "", x.href) }; $1`)
gelbooru.com##+js(rpnt, script, /(function responsiveViewToggle\(\))/, `document.querySelectorAll(".mobileActions a[target='_blank']").forEach(a => a.removeAttribute("target")); document.head.insertAdjacentHTML("afterbegin", "<style>.headerAd, div[style*='height:']:has(> [id^='ts_ad_']), div[style^='text-align: center; padding: 10px;'], center:has(div[style$='height: 250px; ']), .mobileActions .showEditBox { display: none !important; }</style>"); document.querySelectorAll(".thumbnail-preview a").forEach(a => { var b = new URL(a.href); b.searchParams.delete("tags"); a.href = b.href }); $1`)
medibang.com##+js(rpnt, script, /(var ROOT_URL =)/, `var x = new MutationObserver(() => document.querySelectorAll(".illust-item_box a").forEach(a => a.href = a.href.replace(".com/picture/viewer/", ".com/picture/"))); location.pathname === "/contentsSearch/" && x.observe(document.body, { subtree: true, childList: true }); /^\/picture\//.test(location.pathname) && document.querySelectorAll(".pictureDetails__image > a").forEach(b => { delete b.dataset.zoomUrl; b.href = b.querySelector("img").src.replace("/1280_960/", "/") }); $1`)
toyhou.se##+js(rpnt, script, /(stickyFooter)/, `(()=>{const warning=document.querySelector(".content-warning");function favoriteRedirect(){document.querySelectorAll(".character-favorites a").forEach((e=>e.href+="/favorites"))}warning&&(warning.style.display="none",warning.querySelector("button.btn-success").click()),document.querySelector(".character-profile")&&document.querySelectorAll(".profile-info-content .row").forEach((e=>{const t=e.querySelector(".field-title").innerText;if("Creator"===t||"Designers"===t){e.querySelector("a").href+="/created"}})),favoriteRedirect();const observer=new MutationObserver(favoriteRedirect);observer.observe(document.querySelector(".modal-content"),{childList:!0})})(); $1`)
www.pixnoy.com##+js(rpnt, script, /(window\.dataLayer =)/, `(()=>{function e(){document.querySelectorAll(".item:not(:has(.sum))").forEach(e=>{const t=e.querySelector("img")?.alt;if(t){const o=document.createElement("div");o.className="sum",o.innerText=t;let r=o.innerHTML;[...new Set(r.match(/(?<=@)[A-Za-z0-9_.]+/g))].forEach(e=>{r=r.replaceAll("@"+e,"<a href='/profile/"+e+"'>@"+e+"</a>")}),o.innerHTML=r;const n=e.querySelector(".meta");n.insertBefore(o,n.querySelector(".count"))}})}if(document.title=document.title.replace(/ (Instagram (profile, stories|tagged) )?- Pixnoy.*$/,""),location.pathname.startsWith("/profile/")){document.querySelector(".be_un a")&&location.assign(document.querySelector(".be_un a").href),e();const t=new MutationObserver(e),o=document.querySelector(".items");o&&t.observe(o,{childList:!0})}})(); $1`)
